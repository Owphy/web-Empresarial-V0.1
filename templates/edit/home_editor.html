{% extends 'edit/layout_editor.html' %}

{% block body %}
<main>
  <div id="myCarousel" class="carousel slide mb-6" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#myCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>

    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="{{ url_for('static', filename='example1.jpg') }}" class="d-block w-100" alt="News Image">
        <div class="container">
          <div class="carousel-caption text-start">
            <h1 id="carousel_title_1">{{ editable_texts['carousel_title_1'] }} 
            </h1>
            <button onclick="editText('carousel_title_1')">✎</button>
            <button onclick="saveText('carousel_title_1')">💾</button>
            <p id="carousel_content_1" class="opacity-75">{{ editable_texts['carousel_content_1'] }}
            </p>
            <button onclick="editText('carousel_content_1')">✎</button>
            <button onclick="saveText('carousel_content_1')">💾</button>
          </div>
        </div>
      </div>
      
      <div class="carousel-item">
        <img src="{{ url_for('static', filename='example1.jpg') }}" class="d-block w-100" alt="News Image">
        <div class="container">
          <div class="carousel-caption">
            <h1 id="carousel_title_2">{{ editable_texts['carousel_title_2'] }} 
            </h1>
            <button onclick="editText('carousel_title_2')">✎</button>
            <button onclick="saveText('carousel_title_2')">💾</button>
            <p id="carousel_content_2">{{ editable_texts['carousel_content_2'] }}
            </p>
            <button onclick="editText('carousel_content_2')">✎</button>
            <button onclick="saveText('carousel_content_2')">💾</button>
          </div>
        </div>
      </div>

      <div class="carousel-item">
        <img src="{{ url_for('static', filename='example1.jpg') }}" class="d-block w-100" alt="News Image">
        <div class="container">
          <div class="carousel-caption text-end">
            <h1 id="carousel_title_3">{{ editable_texts['carousel_title_3'] }} 
            </h1>
            <button onclick="editText('carousel_title_3')">✎</button>
            <button onclick="saveText('carousel_title_3')">💾</button>
            <p id="carousel_content_3">{{ editable_texts['carousel_content_3'] }}
            </p>
            <button onclick="editText('carousel_content_3')">✎</button>
            <button onclick="saveText('carousel_content_3')">💾</button>
          </div>
        </div>
      </div>

    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#myCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#myCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Siguiente</span>
    </button>
  </div>

  <div class="container marketing">
    <div class="row">
      <div class="col-lg-4">
        <img class="bd-placeholder-img rounded-circle" src="https://s.france24.com/media/display/a901be9e-f5ad-11ee-abe5-005056a90284/w:1024/p:16x9/news_es_1920x1080.jpg" width="140" height="140">
        <h2 id="title_1">{{ editable_texts['title_1'] }}
        </h2>
        <button onclick="editText('title_1')">✎</button>
        <button onclick="saveText('title_1')">💾</button>
        <p id="content_1">{{ editable_texts['content_1'] }}
        </p>
        <button onclick="editText('content_1')">✎</button>
        <button onclick="saveText('content_1')">💾</button>
        <p><a class="btn btn-secondary" href="#">View details &raquo;</a></p>
      </div>

      <div class="col-lg-4">
        <img class="bd-placeholder-img rounded-circle" src="https://s.france24.com/media/display/a901be9e-f5ad-11ee-abe5-005056a90284/w:1024/p:16x9/news_es_1920x1080.jpg" width="140" height="140">
        <h2 id="title_2">{{ editable_texts['title_2'] }}
        </h2>
        <button onclick="editText('title_2')">✎</button>
        <button onclick="saveText('title_2')">💾</button>
        <p id="content_2">{{ editable_texts['content_2'] }}
        </p>
        <button onclick="editText('content_2')">✎</button>
        <button onclick="saveText('content_2')">💾</button>
        <p><a class="btn btn-secondary" href="#">View details &raquo;</a></p>
      </div>

      <div class="col-lg-4">
        <img class="bd-placeholder-img rounded-circle" src="https://s.france24.com/media/display/a901be9e-f5ad-11ee-abe5-005056a90284/w:1024/p:16x9/news_es_1920x1080.jpg" width="140" height="140">
        <h2 id="title_3">{{ editable_texts['title_3'] }}
        </h2>
        <button onclick="editText('title_3')">✎</button>
        <button onclick="saveText('title_3')">💾</button>
        <p id="content_3">{{ editable_texts['content_3'] }}
        </p>
        <button onclick="editText('content_3')">✎</button>
        <button onclick="saveText('content_3')">💾</button>
        <p><a class="btn btn-secondary" href="#">View details &raquo;</a></p>
      </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7">
        <h2 id="featurette_title_1" class="featurette-heading fw-normal lh-1">{{ editable_texts['featurette_title_1'] }}
        </h2>
        <button onclick="editText('featurette_title_1')">✎</button>
        <button onclick="saveText('featurette_title_1')">💾</button>
        <p id="featurette_content_1" class="lead">{{ editable_texts['featurette_content_1'] }}
        </p>
        <button onclick="editText('featurette_content_1')">✎</button>
        <button onclick="saveText('featurette_content_1')">💾</button>
      </div>
      <div class="col-md-5">
        <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-bg)"/><text x="50%" y="50%" fill="var(--bs-secondary-color)" dy=".3em">500x500</text></svg>
      </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7 order-md-2">
        <h2 id="featurette_title_2" class="featurette-heading fw-normal lh-1">{{ editable_texts['featurette_title_2'] }}
        </h2>
        <button onclick="editText('featurette_title_2')">✎</button>
        <button onclick="saveText('featurette_title_2')">💾</button>
        <p id="featurette_content_2" class="lead">{{ editable_texts['featurette_content_2'] }}
        </p>
        <button onclick="editText('featurette_content_2')">✎</button>
        <button onclick="saveText('featurette_content_2')">💾</button>
      </div>
      <div class="col-md-5 order-md-1">
        <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-bg)"/><text x="50%" y="50%" fill="var(--bs-secondary-color)" dy=".3em">500x500</text></svg>
      </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7">
        <h2 id="featurette_title_3" class="featurette-heading fw-normal lh-1">{{ editable_texts['featurette_title_3'] }}
        </h2>
        <button onclick="editText('featurette_title_3')">✎</button>
        <button onclick="saveText('featurette_title_3')">💾</button>
        <p id="featurette_content_3" class="lead">{{ editable_texts['featurette_content_3'] }}
        </p>
        <button onclick="editText('featurette_content_3')">✎</button>
        <button onclick="saveText('featurette_content_3')">💾</button>
      </div>
      <div class="col-md-5">
        <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 500x500" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-bg)"/><text x="50%" y="50%" fill="var(--bs-secondary-color)" dy=".3em">500x500</text></svg>
      </div>
    </div>

    <hr class="featurette-divider">

  </div>

  <footer class="container">
    <p class="float-end"><a href="#">Regresar al inicio</a></p>
    <p>&copy; 2017–2024 Company, Inc. &middot; <a href="#">Privacy</a> &middot; <a href="#">Terms</a></p>
  </footer>
</main>

<!-- JavaScript para la edición y el guardado -->
<script>
function editText(elementId) {
  let element = document.getElementById(elementId);
  let currentText = element.innerText;
  let input = document.createElement("input");
  input.type = "text";
  input.value = currentText;
  input.onblur = function() {
    element.innerText = this.value;
  };
  element.innerText = '';
  element.appendChild(input);
  input.focus();
}

function saveText(elementId) {
  let element = document.getElementById(elementId);
  let newText = element.innerText;
  
  // Aquí puedes hacer una llamada AJAX para guardar el nuevo texto en la base de datos
  fetch('/save_text', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRFToken': '{{ csrf_token() }}'
    },
    body: JSON.stringify({
      section_id: elementId,
      content: newText
    })
  }).then(response => {
    if (response.ok) {
      console.log('Texto guardado con éxito');
    } else {
      console.log('Error al guardar el texto');
    }
  });
}
</script>
{% endblock %}
