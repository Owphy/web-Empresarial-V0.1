{% extends 'auth/login.html' %}

{% block body %}
<!-- Mensajes Flash -->
<div class="container mt-3">
  {% with messages = get_flashed_messages(with_categories=True) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>

<!-- Formulario de Registro -->
<form class="container_" method="POST" action="{{ url_for('register') }}" onsubmit="return validarFormulario()">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <div class="img2">
    <img src="https://cdn-icons-png.flaticon.com/512/12123/12123009.png" class="img2" alt="...">
  </div> 
  <div class="container_email">
    <!-- Contenedor de Nombre de Usuario -->
    <label for="username" class="Info_container">Username</label>
    <input type="text" class="form-control" id="username" name="username" required>
  </div>

    <!-- email -->
     <div class="container_email">
    <label for="email" class="Info_container">E-mail</label>
    <input type="email" class="form-control" id="email" name="email" required>
    </div>

  <!-- Contenedor de Contraseña -->
  <div class="container_password">
    <label for="password" class="form-label">Contraseña</label>
    <input type="password" class="form-control" id="password" name="password" required>
  </div>
  <!-- Contenedor de Confirmación de Contraseña -->
  <div class="container_password">
    <label for="password2" class="form-label">Confirmar Contraseña</label>
    <input type="password" class="form-control" id="password2" name="password2" required>
  </div>
  <!-- Contenedor de Género -->
  <div class="gender_container">
    <div class="gender_male_container">
      <input class="gender_male_container" type="radio" name="gender" id="gender_male" value="Hombre" required>
      <label class="gender_male_container" for="gender_male">Hombre</label>
    </div>
    <div class="gender_female_container">
      <input class="gender_female_container" type="radio" name="gender" id="gender_female" value="Mujer" required>
      <label class="gender_female_container" for="gender_female">Mujer</label>
    </div>
    <div class="gender_other_container">
      <input class="gender_other_container" type="radio" name="gender" id="gender_other" value="Otro" required>
      <label class="gender_other_container" for="gender_other">Otro</label>
    </div>
  </div>
  <!-- Contenedor de Confirmación -->
  <div class="container_confirmation">
    <input type="checkbox" class="form-check-input" id="exampleCheck1" required>
    <label class="form-check-label" for="exampleCheck1">Confirmación</label>
  </div>
  <!-- Botón de Continuar -->
  <div class="container_continue">
    <button type="submit" class="btn btn-primary" id="continue">Continuar</button>
  </div>
</form>

<!-- Validación del Formulario -->
<script>
  function validarFormulario() {
    var checkBox = document.getElementById('exampleCheck1');
    var password = document.getElementById('password').value;
    var password2 = document.getElementById('password2').value;
    var gender_male = document.getElementById('gender_male').checked;
    var gender_female = document.getElementById('gender_female').checked;
    var gender_other = document.getElementById('gender_other').checked;
    
    if (!checkBox.checked) {
      alert('Debes marcar la casilla de confirmación para continuar.');
      return false;
    }

    if (!gender_male && !gender_female && !gender_other) {
      alert('Debes seleccionar tu género.');
      return false;
    }

    if (password !== password2) {
      alert('Las contraseñas no coinciden.');
      return false;
    }

    return true;
  }
</script>
{% endblock %}
